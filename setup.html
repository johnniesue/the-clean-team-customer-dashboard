<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Setup - Dashboard Template</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #718096;
            font-size: 1.1rem;
        }

        .progress-bar {
            background: #e2e8f0;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #48bb78, #38a169);
            height: 100%;
            transition: width 0.3s ease;
        }

        .setup-sections {
            display: grid;
            gap: 30px;
        }

        .setup-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .section-header {
            background: linear-gradient(135deg, #4299e1, #667eea);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-header h2 {
            font-size: 1.5rem;
        }

        .section-status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .status-complete {
            background: #c6f6d5;
            color: #22543d;
        }

        .status-incomplete {
            background: #fed7d7;
            color: #742a2a;
        }

        .section-body {
            padding: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #4a5568;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4299e1;
        }

        .color-picker {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .color-option.selected {
            border-color: #2d3748;
            transform: scale(1.1);
        }

        .service-item {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .service-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 10px;
        }

        .service-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #4299e1;
            color: white;
        }

        .btn-primary:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
        }

        .btn-danger {
            background: #f56565;
            color: white;
        }

        .btn-danger:hover {
            background: #e53e3e;
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .area-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .area-tag {
            background: #e2e8f0;
            color: #4a5568;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .remove-tag {
            background: #f56565;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .api-section {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .api-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background: #e2e8f0;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: #48bb78;
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 21px;
            height: 21px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(25px);
        }

        .quick-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .success-message {
            background: #c6f6d5;
            color: #22543d;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Business Setup</h1>
            <p>Configure your dashboard for your business</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="progressText">Setup Progress: 0%</p>
        </div>

        <div class="success-message" id="successMessage">
            ‚úÖ Settings saved successfully!
        </div>

        <div class="setup-sections">
            <!-- Company Information -->
            <div class="setup-section">
                <div class="section-header">
                    <h2>üè¢ Company Information</h2>
                    <span class="section-status status-incomplete" id="companyStatus">Incomplete</span>
                </div>
                <div class="section-body">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="companyName">Company Name *</label>
                            <input type="text" id="companyName" placeholder="The Clean Team">
                        </div>
                        <div class="form-group">
                            <label for="companyTagline">Tagline</label>
                            <input type="text" id="companyTagline" placeholder="Professional Cleaning Services">
                        </div>
                        <div class="form-group">
                            <label for="companyPhone">Phone Number *</label>
                            <input type="tel" id="companyPhone" placeholder="(555) 123-4567">
                        </div>
                        <div class="form-group">
                            <label for="companyEmail">Email</label>
                            <input type="email" id="companyEmail" placeholder="info@cleanteam.com">
                        </div>
                        <div class="form-group">
                            <label for="companyWebsite">Website</label>
                            <input type="url" id="companyWebsite" placeholder="www.cleanteam.com">
                        </div>
                        <div class="form-group">
                            <label for="companyAddress">Address</label>
                            <textarea id="companyAddress" rows="3" placeholder="123 Main St, Your City, State 12345"></textarea>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Brand Colors</label>
                        <div class="color-picker">
                            <div class="color-option" style="background: #4299e1" data-color="#4299e1"></div>
                            <div class="color-option" style="background: #48bb78" data-color="#48bb78"></div>
                            <div class="color-option" style="background: #ed8936" data-color="#ed8936"></div>
                            <div class="color-option" style="background: #9f7aea" data-color="#9f7aea"></div>
                            <div class="color-option" style="background: #f56565" data-color="#f56565"></div>
                            <div class="color-option" style="background: #38b2ac" data-color="#38b2ac"></div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveCompanyInfo()">Save Company Info</button>
                </div>
            </div>

            <!-- Service Areas -->
            <div class="setup-section">
                <div class="section-header">
                    <h2>üó∫Ô∏è Service Areas</h2>
                    <span class="section-status status-incomplete" id="areasStatus">Incomplete</span>
                </div>
                <div class="section-body">
                    <div class="form-group">
                        <label for="newArea">Add Service Area</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="newArea" placeholder="City or Area Name">
                            <button class="btn btn-success" onclick="addServiceArea()">Add</button>
                        </div>
                    </div>
                    
                    <div class="area-tags" id="serviceAreas">
                        <!-- Service areas will be loaded here -->
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveServiceAreas()">Save Service Areas</button>
                </div>
            </div>

            <!-- Services -->
            <div class="setup-section">
                <div class="section-header">
                    <h2>üõ†Ô∏è Services Offered</h2>
                    <span class="section-status status-incomplete" id="servicesStatus">Incomplete</span>
                </div>
                <div class="section-body">
                    <div id="servicesList">
                        <!-- Services will be loaded here -->
                    </div>
                    
                    <button class="btn btn-success" onclick="addNewService()">‚ûï Add New Service</button>
                    <button class="btn btn-primary" onclick="saveServices()">Save Services</button>
                </div>
            </div>

            <!-- API Integration -->
            <div class="setup-section">
                <div class="section-header">
                    <h2>üîå API Integration</h2>
                    <span class="section-status status-complete" id="apiStatus">Optional</span>
                </div>
                <div class="section-body">
                    <!-- Google Maps API -->
                    <div class="api-section">
                        <div class="api-toggle">
                            <div class="toggle-switch" id="mapsToggle" onclick="toggleAPI('maps')">
                                <div class="toggle-slider"></div>
                            </div>
                            <h3>Google Maps API</h3>
                        </div>
                        <p>Enable Google Maps for service area visualization and routing</p>
                        <div class="form-group" id="mapsConfig" style="display: none;">
                            <label for="mapsApiKey">Google Maps API Key</label>
                            <input type="text" id="mapsApiKey" placeholder="Your Google Maps API Key">
                        </div>
                    </div>

                    <!-- Firebase -->
                    <div class="api-section">
                        <div class="api-toggle">
                            <div class="toggle-switch" id="firebaseToggle" onclick="toggleAPI('firebase')">
                                <div class="toggle-slider"></div>
                            </div>
                            <h3>Firebase Backend</h3>
                        </div>
                        <p>Enable Firebase for cloud data storage and real-time sync</p>
                        <div id="firebaseConfig" style="display: none;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="firebaseApiKey">API Key</label>
                                    <input type="text" id="firebaseApiKey" placeholder="Firebase API Key">
                                </div>
                                <div class="form-group">
                                    <label for="firebaseAuthDomain">Auth Domain</label>
                                    <input type="text" id="firebaseAuthDomain" placeholder="your-project.firebaseapp.com">
                                </div>
                                <div class="form-group">
                                    <label for="firebaseProjectId">Project ID</label>
                                    <input type="text" id="firebaseProjectId" placeholder="your-project-id">
                                </div>
                                <div class="form-group">
                                    <label for="firebaseStorageBucket">Storage Bucket</label>
                                    <input type="text" id="firebaseStorageBucket" placeholder="your-project.appspot.com">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveAPIConfig()">Save API Configuration</button>
                </div>
            </div>
        </div>

        <div class="quick-actions">
            <a href="employee-manager.html" class="btn btn-primary">üë• Manage Employees</a>
            <a href="index.html" class="btn btn-success">üè† Go to Dashboard</a>
            <button class="btn btn-secondary" onclick="resetAllSettings()">üîÑ Reset All Settings</button>
        </div>
    </div>

    <script src="business-config.js"></script>
    <script>
        let currentServices = [];
        let currentAreas = [];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadCurrentSettings();
            updateProgress();
        });

        function loadCurrentSettings() {
            const config = BusinessConfig.getConfig();
            
            // Load company info
            document.getElementById('companyName').value = config.company.name;
            document.getElementById('companyTagline').value = config.company.tagline;
            document.getElementById('companyPhone').value = config.company.phone;
            document.getElementById('companyEmail').value = config.company.email;
            document.getElementById('companyWebsite').value = config.company.website;
            document.getElementById('companyAddress').value = config.company.address;
            
            // Set selected color
            const colorOptions = document.querySelectorAll('.color-option');
            colorOptions.forEach(option => {
                if (option.dataset.color === config.company.colors.primary) {
                    option.classList.add('selected');
                }
            });
            
            // Load service areas
            currentAreas = [...config.serviceAreas];
            displayServiceAreas();
            
            // Load services
            currentServices = [...config.services];
            displayServices();
            
            // Load API settings
            if (config.apis.googleMaps.enabled) {
                document.getElementById('mapsToggle').classList.add('active');
                document.getElementById('mapsConfig').style.display = 'block';
                document.getElementById('mapsApiKey').value = config.apis.googleMaps.apiKey;
            }
            
            if (config.apis.firebase.enabled) {
                document.getElementById('firebaseToggle').classList.add('active');
                document.getElementById('firebaseConfig').style.display = 'block';
                document.getElementById('firebaseApiKey').value = config.apis.firebase.config.apiKey;
                document.getElementById('firebaseAuthDomain').value = config.apis.firebase.config.authDomain;
                document.getElementById('firebaseProjectId').value = config.apis.firebase.config.projectId;
                document.getElementById('firebaseStorageBucket').value = config.apis.firebase.config.storageBucket;
            }
        }

        function updateProgress() {
            const progress = BusinessConfig.getSetupProgress();
            document.getElementById('progressFill').style.width = progress.percentage + '%';
            document.getElementById('progressText').textContent = `Setup Progress: ${progress.percentage}%`;
            
            // Update section statuses
            const config = BusinessConfig.getConfig();
            
            // Company status
            const companyComplete = config.company.name !== "Your Business Name" && config.company.phone !== "(555) 123-4567";
            updateSectionStatus('companyStatus', companyComplete);
            
            // Areas status
            const areasComplete = config.serviceAreas.length > 0 && config.serviceAreas[0] !== "Your City";
            updateSectionStatus('areasStatus', areasComplete);
            
            // Services status
            const servicesComplete = config.services.length > 0 && config.services[0].name !== "Standard Service";
            updateSectionStatus('servicesStatus', servicesComplete);
        }

        function updateSectionStatus(elementId, isComplete) {
            const element = document.getElementById(elementId);
            if (isComplete) {
                element.textContent = 'Complete';
                element.className = 'section-status status-complete';
            } else {
                element.textContent = 'Incomplete';
                element.className = 'section-status status-incomplete';
            }
        }

        // Color picker
        document.querySelectorAll('.color-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });

        function saveCompanyInfo() {
            const selectedColor = document.querySelector('.color-option.selected')?.dataset.color || '#4299e1';
            
            const companyData = {
                name: document.getElementById('companyName').value,
                tagline: document.getElementById('companyTagline').value,
                phone: document.getElementById('companyPhone').value,
                email: document.getElementById('companyEmail').value,
                website: document.getElementById('companyWebsite').value,
                address: document.getElementById('companyAddress').value,
                colors: {
                    primary: selectedColor,
                    secondary: selectedColor,
                    accent: selectedColor
                }
            };
            
            BusinessConfig.updateSection('company', companyData);
            showSuccessMessage();
            updateProgress();
        }

        function displayServiceAreas() {
            const container = document.getElementById('serviceAreas');
            container.innerHTML = currentAreas.map(area => `
                <div class="area-tag">
                    ${area}
                    <button class="remove-tag" onclick="removeServiceArea('${area}')">&times;</button>
                </div>
            `).join('');
        }

        function addServiceArea() {
            const input = document.getElementById('newArea');
            const area = input.value.trim();
            
            if (area && !currentAreas.includes(area)) {
                currentAreas.push(area);
                displayServiceAreas();
                input.value = '';
            }
        }

        function removeServiceArea(area) {
            currentAreas = currentAreas.filter(a => a !== area);
            displayServiceAreas();
        }

        function saveServiceAreas() {
            BusinessConfig.updateSection('serviceAreas', currentAreas);
            showSuccessMessage();
            updateProgress();
        }

        function displayServices() {
            const container = document.getElementById('servicesList');
            container.innerHTML = currentServices.map((service, index) => `
                <div class="service-item">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Service Name</label>
                            <input type="text" value="${service.name}" onchange="updateService(${index}, 'name', this.value)">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <input type="text" value="${service.description}" onchange="updateService(${index}, 'description', this.value)">
                        </div>
                        <div class="form-group">
                            <label>Duration (hours)</label>
                            <input type="number" value="${service.duration}" onchange="updateService(${index}, 'duration', this.value)">
                        </div>
                        <div class="form-group">
                            <label>Base Price ($)</label>
                            <input type="number" value="${service.price}" onchange="updateService(${index}, 'price', this.value)">
                        </div>
                    </div>
                    <div class="service-actions">
                        <button class="btn btn-danger" onclick="removeService(${index})">Remove</button>
                    </div>
                </div>
            `).join('');
        }

        function updateService(index, field, value) {
            if (field === 'duration' || field === 'price') {
                value = parseFloat(value) || 0;
            }
            currentServices[index][field] = value;
        }

        function addNewService() {
            const newService = {
                id: 'service_' + Date.now(),
                name: 'New Service',
                description: 'Service description',
                duration: 2,
                price: 100
            };
            currentServices.push(newService);
            displayServices();
        }

        function removeService(index) {
            currentServices.splice(index, 1);
            displayServices();
        }

        function saveServices() {
            BusinessConfig.updateSection('services', currentServices);
            showSuccessMessage();
            updateProgress();
        }

        function toggleAPI(apiType) {
            const toggle = document.getElementById(apiType + 'Toggle');
            const config = document.getElementById(apiType + 'Config');
            
            toggle.classList.toggle('active');
            
            if (toggle.classList.contains('active')) {
                config.style.display = 'block';
            } else {
                config.style.display = 'none';
            }
        }

        function saveAPIConfig() {
            const mapsEnabled = document.getElementById('mapsToggle').classList.contains('active');
            const firebaseEnabled = document.getElementById('firebaseToggle').classList.contains('active');
            
            const apiConfig = {
                googleMaps: {
                    enabled: mapsEnabled,
                    apiKey: mapsEnabled ? document.getElementById('mapsApiKey').value : ''
                },
                firebase: {
                    enabled: firebaseEnabled,
                    config: firebaseEnabled ? {
                        apiKey: document.getElementById('firebaseApiKey').value,
                        authDomain: document.getElementById('firebaseAuthDomain').value,
                        projectId: document.getElementById('firebaseProjectId').value,
                        storageBucket: document.getElementById('firebaseStorageBucket').value
                    } : {}
                }
            };
            
            BusinessConfig.updateSection('apis', apiConfig);
            showSuccessMessage();
        }

        function resetAllSettings() {
            if (confirm('Are you sure you want to reset all settings? This cannot be undone.')) {
                localStorage.clear();
                location.reload();
            }
        }

        function showSuccessMessage() {
            const message = document.getElementById('successMessage');
            message.style.display = 'block';
            setTimeout(() => {
                message.style.display = 'none';
            }, 3000);
        }

        // Enter key support for adding areas
        document.getElementById('newArea').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addServiceArea();
            }
        });
    </script>
</body>
</html>

