<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Setup - Dashboard Template</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #718096;
            font-size: 1.1rem;
        }

        .message {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .message.success {
            background: #c6f6d5;
            color: #22543d;
            border: 1px solid #9ae6b4;
            display: block;
        }

        .message.error {
            background: #fed7d7;
            color: #742a2a;
            border: 1px solid #feb2b2;
            display: block;
        }

        .setup-section {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 30px;
        }

        .section-header {
            background: linear-gradient(135deg, #4299e1, #667eea);
            color: white;
            padding: 20px;
        }

        .section-header h2 {
            font-size: 1.5rem;
        }

        .section-body {
            padding: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #4a5568;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4299e1;
        }

        .color-picker {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .color-option.selected {
            border-color: #2d3748;
            transform: scale(1.1);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            margin: 5px;
        }

        .btn-primary {
            background: #4299e1;
            color: white;
        }

        .btn-primary:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
        }

        .area-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .area-tag {
            background: #e2e8f0;
            color: #4a5568;
            padding: 8px 12px;
            border-radius: 15px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .remove-tag {
            background: #f56565;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .service-item {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .quick-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Business Setup</h1>
            <p>Configure your dashboard for your business</p>
        </div>

        <!-- Status Messages -->
        <div id="statusMessage" class="message"></div>

        <div class="setup-sections">
            <!-- Company Information -->
            <div class="setup-section">
                <div class="section-header">
                    <h2>üè¢ Company Information</h2>
                </div>
                <div class="section-body">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="companyName">Company Name *</label>
                            <input type="text" id="companyName" placeholder="The Clean Team" required>
                        </div>
                        <div class="form-group">
                            <label for="companyTagline">Tagline</label>
                            <input type="text" id="companyTagline" placeholder="Professional Cleaning Services">
                        </div>
                        <div class="form-group">
                            <label for="companyPhone">Phone Number *</label>
                            <input type="tel" id="companyPhone" placeholder="(555) 123-4567" required>
                        </div>
                        <div class="form-group">
                            <label for="companyEmail">Email</label>
                            <input type="email" id="companyEmail" placeholder="info@cleanteam.com">
                        </div>
                        <div class="form-group">
                            <label for="companyWebsite">Website</label>
                            <input type="url" id="companyWebsite" placeholder="www.cleanteam.com">
                        </div>
                        <div class="form-group">
                            <label for="companyAddress">Address</label>
                            <textarea id="companyAddress" rows="3" placeholder="123 Main St, Your City, State 12345"></textarea>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Brand Colors</label>
                        <div class="color-picker" id="colorPicker">
                            <div class="color-option" style="background: #4299e1" data-color="#4299e1"></div>
                            <div class="color-option" style="background: #48bb78" data-color="#48bb78"></div>
                            <div class="color-option" style="background: #ed8936" data-color="#ed8936"></div>
                            <div class="color-option" style="background: #9f7aea" data-color="#9f7aea"></div>
                            <div class="color-option" style="background: #f56565" data-color="#f56565"></div>
                            <div class="color-option" style="background: #38b2ac" data-color="#38b2ac"></div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveCompanyInfo()">Save Company Info</button>
                </div>
            </div>

            <!-- Service Areas -->
            <div class="setup-section">
                <div class="section-header">
                    <h2>üó∫Ô∏è Service Areas</h2>
                </div>
                <div class="section-body">
                    <div class="form-group">
                        <label for="newArea">Add Service Area</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="newArea" placeholder="City or Area Name">
                            <button class="btn btn-success" onclick="addServiceArea()">Add</button>
                        </div>
                    </div>
                    
                    <div class="area-tags" id="serviceAreas">
                        <!-- Service areas will be loaded here -->
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveServiceAreas()">Save Service Areas</button>
                </div>
            </div>

            <!-- Services -->
            <div class="setup-section">
                <div class="section-header">
                    <h2>üõ†Ô∏è Services Offered</h2>
                </div>
                <div class="section-body">
                    <div id="servicesList">
                        <!-- Services will be loaded here -->
                    </div>
                    
                    <button class="btn btn-success" onclick="addNewService()">‚ûï Add New Service</button>
                    <button class="btn btn-primary" onclick="saveServices()">Save Services</button>
                </div>
            </div>
        </div>

        <div class="quick-actions">
            <a href="employee-manager.html" class="btn btn-primary">üë• Manage Employees</a>
            <a href="index.html" class="btn btn-success">üè† Go to Dashboard</a>
            <button class="btn btn-primary" onclick="testStorage()">üîß Test Storage</button>
        </div>
    </div>

    <script>
        // Simple, working storage system
        let currentServices = [
            { id: 1, name: 'House Cleaning', description: 'Residential cleaning service', duration: 3, price: 150 },
            { id: 2, name: 'Office Cleaning', description: 'Commercial cleaning service', duration: 4, price: 200 },
            { id: 3, name: 'Deep Cleaning', description: 'Thorough deep cleaning', duration: 6, price: 300 }
        ];
        
        let currentAreas = ['Dallas', 'Plano', 'Frisco', 'McKinney'];
        let selectedColor = '#48bb78'; // Green for cleaning

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            setupColorPicker();
            displayServiceAreas();
            displayServices();
        });

        function showMessage(text, type = 'success') {
            const messageEl = document.getElementById('statusMessage');
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;
            messageEl.style.display = 'block';
            
            setTimeout(() => {
                messageEl.style.display = 'none';
            }, 3000);
        }

        function testStorage() {
            try {
                localStorage.setItem('test', 'working');
                const result = localStorage.getItem('test');
                localStorage.removeItem('test');
                
                if (result === 'working') {
                    showMessage('‚úÖ Storage is working perfectly!', 'success');
                } else {
                    showMessage('‚ùå Storage test failed', 'error');
                }
            } catch (e) {
                showMessage('‚ùå Storage not available: ' + e.message, 'error');
            }
        }

        function setupColorPicker() {
            const colorOptions = document.querySelectorAll('.color-option');
            colorOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from all options
                    colorOptions.forEach(opt => opt.classList.remove('selected'));
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    selectedColor = this.dataset.color;
                    showMessage('Color selected: ' + selectedColor, 'success');
                });
            });
            
            // Set default selection (green for cleaning)
            const greenOption = document.querySelector('[data-color="#48bb78"]');
            if (greenOption) {
                greenOption.classList.add('selected');
            }
        }

        function loadSettings() {
            try {
                // Load company info
                const savedCompany = localStorage.getItem('company-info');
                if (savedCompany) {
                    const company = JSON.parse(savedCompany);
                    document.getElementById('companyName').value = company.name || '';
                    document.getElementById('companyTagline').value = company.tagline || '';
                    document.getElementById('companyPhone').value = company.phone || '';
                    document.getElementById('companyEmail').value = company.email || '';
                    document.getElementById('companyWebsite').value = company.website || '';
                    document.getElementById('companyAddress').value = company.address || '';
                    
                    if (company.color) {
                        selectedColor = company.color;
                        const colorOption = document.querySelector(`[data-color="${company.color}"]`);
                        if (colorOption) {
                            document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
                            colorOption.classList.add('selected');
                        }
                    }
                }

                // Load service areas
                const savedAreas = localStorage.getItem('service-areas');
                if (savedAreas) {
                    currentAreas = JSON.parse(savedAreas);
                }

                // Load services
                const savedServices = localStorage.getItem('services');
                if (savedServices) {
                    currentServices = JSON.parse(savedServices);
                }
            } catch (e) {
                console.warn('Failed to load settings:', e);
            }
        }

        function saveCompanyInfo() {
            try {
                const companyData = {
                    name: document.getElementById('companyName').value.trim(),
                    tagline: document.getElementById('companyTagline').value.trim(),
                    phone: document.getElementById('companyPhone').value.trim(),
                    email: document.getElementById('companyEmail').value.trim(),
                    website: document.getElementById('companyWebsite').value.trim(),
                    address: document.getElementById('companyAddress').value.trim(),
                    color: selectedColor
                };

                // Validate required fields
                if (!companyData.name) {
                    showMessage('‚ùå Company name is required', 'error');
                    return;
                }
                if (!companyData.phone) {
                    showMessage('‚ùå Phone number is required', 'error');
                    return;
                }

                localStorage.setItem('company-info', JSON.stringify(companyData));
                showMessage('‚úÖ Company information saved successfully!', 'success');
            } catch (e) {
                showMessage('‚ùå Failed to save company info: ' + e.message, 'error');
            }
        }

        function displayServiceAreas() {
            const container = document.getElementById('serviceAreas');
            container.innerHTML = currentAreas.map(area => `
                <div class="area-tag">
                    ${area}
                    <button class="remove-tag" onclick="removeServiceArea('${area}')">&times;</button>
                </div>
            `).join('');
        }

        function addServiceArea() {
            const input = document.getElementById('newArea');
            const area = input.value.trim();
            
            if (area && !currentAreas.includes(area)) {
                currentAreas.push(area);
                displayServiceAreas();
                input.value = '';
                showMessage('‚úÖ Service area added: ' + area, 'success');
            } else if (currentAreas.includes(area)) {
                showMessage('‚ùå Service area already exists', 'error');
            } else {
                showMessage('‚ùå Please enter a service area name', 'error');
            }
        }

        function removeServiceArea(area) {
            currentAreas = currentAreas.filter(a => a !== area);
            displayServiceAreas();
            showMessage('‚úÖ Service area removed: ' + area, 'success');
        }

        function saveServiceAreas() {
            try {
                localStorage.setItem('service-areas', JSON.stringify(currentAreas));
                showMessage('‚úÖ Service areas saved successfully!', 'success');
            } catch (e) {
                showMessage('‚ùå Failed to save service areas: ' + e.message, 'error');
            }
        }

        function displayServices() {
            const container = document.getElementById('servicesList');
            container.innerHTML = currentServices.map((service, index) => `
                <div class="service-item">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Service Name</label>
                            <input type="text" value="${service.name}" onchange="updateService(${index}, 'name', this.value)">
                        </div>
                        <div class="form-group">
                            <label>Description</label>
                            <input type="text" value="${service.description}" onchange="updateService(${index}, 'description', this.value)">
                        </div>
                        <div class="form-group">
                            <label>Duration (hours)</label>
                            <input type="number" value="${service.duration}" min="0.5" step="0.5" onchange="updateService(${index}, 'duration', this.value)">
                        </div>
                        <div class="form-group">
                            <label>Base Price ($)</label>
                            <input type="number" value="${service.price}" min="0" step="10" onchange="updateService(${index}, 'price', this.value)">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="removeService(${index})" style="background: #f56565;">Remove Service</button>
                </div>
            `).join('');
        }

        function updateService(index, field, value) {
            if (field === 'duration' || field === 'price') {
                value = parseFloat(value) || 0;
            }
            currentServices[index][field] = value;
            showMessage('‚úÖ Service updated', 'success');
        }

        function addNewService() {
            const newService = {
                id: Date.now(),
                name: 'New Service',
                description: 'Service description',
                duration: 2,
                price: 100
            };
            currentServices.push(newService);
            displayServices();
            showMessage('‚úÖ New service added', 'success');
        }

        function removeService(index) {
            if (confirm('Are you sure you want to remove this service?')) {
                const serviceName = currentServices[index].name;
                currentServices.splice(index, 1);
                displayServices();
                showMessage('‚úÖ Service removed: ' + serviceName, 'success');
            }
        }

        function saveServices() {
            try {
                localStorage.setItem('services', JSON.stringify(currentServices));
                showMessage('‚úÖ Services saved successfully!', 'success');
            } catch (e) {
                showMessage('‚ùå Failed to save services: ' + e.message, 'error');
            }
        }

        // Enter key support for adding areas
        document.getElementById('newArea').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addServiceArea();
            }
        });
    </script>
</body>
</html>

